[gd_resource type="Resource" script_class="StateMachine" load_steps=23 format=3 uid="uid://cfdps1oqufpb6"]

[ext_resource type="Script" uid="uid://dj05xcwu35h2s" path="res://addons/imjp94.yafsm/src/states/StateMachine.gd" id="1_pyv1q"]
[ext_resource type="Script" uid="uid://c32hneu5jvcmt" path="res://addons/imjp94.yafsm/src/states/State.gd" id="2_4xc7j"]
[ext_resource type="Script" uid="uid://eirvcwc438j4" path="res://addons/imjp94.yafsm/src/conditions/BooleanCondition.gd" id="3_loc6h"]
[ext_resource type="Script" uid="uid://473tveuavq5t" path="res://addons/imjp94.yafsm/src/transitions/Transition.gd" id="4_kukut"]
[ext_resource type="Script" uid="uid://41vj1aorhrx8" path="res://addons/imjp94.yafsm/src/conditions/Condition.gd" id="5_38ubg"]

[sub_resource type="GDScript" id="GDScript_pyv1q"]
resource_name = "End"
script/source = "extends StateInterface

# This code is a stub of the StateInterface.  
# Enter is called once when the state is changed to the current state.  Use to initialize the state

#func enter(parent: Node, from: String) -> void: # Enter State
	#pass

# Exit is called when the state has changed to a different state.  Use it to release resources.
#func exit(parent: Node, to: String) -> void: # Exit of state 
	#pass

# Update is called every frame or manually per StatgeMachinePlayer setting.  Execute state code here.
#func update(parent: Node, delta):
	#pass
"

[sub_resource type="GDScript" id="GDScript_4xc7j"]
resource_name = "Entry"
script/source = "extends StateInterface

## Game/End/Entry

# This code is a stub of the StateInterface.  
# Enter is called once when the state is changed to the current state.  Use to initialize the state

func enter(parent: Node, from: String) -> void: # Enter State
	var game_scn = parent #.app_state.get_param(\"game_scn\")
	game_scn.game_end_screen_instance = game_scn.game_end_screen_scns.instantiate()
	game_scn.game_end_screen_instance.set(\"app_state\", parent.app_state)
	game_scn.add_child(game_scn.game_end_screen_instance)
	if game_scn.current_level_instance is Node2D:
		game_scn.game_end_screen_instance.anchor_left = -0.5
		game_scn.game_end_screen_instance.anchor_top = -0.5
		game_scn.game_end_screen_instance.anchor_right = 0.5
		game_scn.game_end_screen_instance.anchor_bottom = 0.5
	else:
		game_scn.game_end_screen_instance.set_anchors_preset(Control.PRESET_FULL_RECT)
	game_scn.get_tree().paused = true # Stop interacting with game

# Exit is called when the state has changed to a different state.  Use it to release resources.
#func exit(parent: Node, to: String) -> void: # Exit of state 
	#pass

# Update is called every frame or manually per StatgeMachinePlayer setting.  Execute state code here.
#func update(parent: Node, delta):
	#pass
"

[sub_resource type="Resource" id="3"]
script = ExtResource("2_4xc7j")
name = "Entry"
state_class = SubResource("GDScript_4xc7j")
metadata/graph_offset = Vector2(359.5, 232.5)

[sub_resource type="GDScript" id="GDScript_loc6h"]
resource_name = "Exit"
script/source = "extends StateInterface

## Game/End/Exit

# This code is a stub of the StateInterface.  
# Enter is called once when the state is changed to the current state.  Use to initialize the state

func enter(parent: Node, from: String) -> void: # Enter State
	var game_scn = parent #.app_state.get_param(\"game_scn\")
	game_scn.get_tree().paused = false

"

[sub_resource type="Resource" id="4"]
script = ExtResource("2_4xc7j")
name = "Exit"
state_class = SubResource("GDScript_loc6h")
metadata/graph_offset = Vector2(979.5, 192.5)

[sub_resource type="GDScript" id="GDScript_kukut"]
resource_name = "GameOver"
script/source = "extends StateInterface

# This code is a stub of the StateInterface.  
# Enter is called once when the state is changed to the current state.  Use to initialize the state

#func enter(parent: Node, from: String) -> void: # Enter State
	#pass

# Exit is called when the state has changed to a different state.  Use it to release resources.
#func exit(parent: Node, to: String) -> void: # Exit of state 
	#pass

# Update is called every frame or manually per StatgeMachinePlayer setting.  Execute state code here.
#func update(parent: Node, delta):
	#pass
"

[sub_resource type="Resource" id="5"]
script = ExtResource("2_4xc7j")
name = "GameOver"
state_class = SubResource("GDScript_kukut")
metadata/graph_offset = Vector2(665, 292.5)

[sub_resource type="GDScript" id="GDScript_38ubg"]
resource_name = "Victory"
script/source = "extends StateInterface

# This code is a stub of the StateInterface.  
# Enter is called once when the state is changed to the current state.  Use to initialize the state

#func enter(parent: Node, from: String) -> void: # Enter State
	#pass

# Exit is called when the state has changed to a different state.  Use it to release resources.
#func exit(parent: Node, to: String) -> void: # Exit of state 
	#pass

# Update is called every frame or manually per StatgeMachinePlayer setting.  Execute state code here.
#func update(parent: Node, delta):
	#pass
"

[sub_resource type="Resource" id="6"]
script = ExtResource("2_4xc7j")
name = "Victory"
state_class = SubResource("GDScript_38ubg")
metadata/graph_offset = Vector2(639.5, 152.5)

[sub_resource type="Resource" id="Resource_pyv1q"]
script = ExtResource("3_loc6h")
value = false
comparation = 0
name = "win"

[sub_resource type="Resource" id="Resource_4xc7j"]
script = ExtResource("4_kukut")
from = "Entry"
to = "GameOver"
conditions = {
"win": SubResource("Resource_pyv1q")
}
priority = 0

[sub_resource type="Resource" id="Resource_loc6h"]
script = ExtResource("3_loc6h")
value = true
comparation = 0
name = "win"

[sub_resource type="Resource" id="Resource_kukut"]
script = ExtResource("4_kukut")
from = "Entry"
to = "Victory"
conditions = {
"win": SubResource("Resource_loc6h")
}
priority = 0

[sub_resource type="Resource" id="11"]
script = ExtResource("5_38ubg")
name = "continue"

[sub_resource type="Resource" id="12"]
script = ExtResource("4_kukut")
from = "GameOver"
to = "Exit"
conditions = {
"continue": SubResource("11")
}
priority = 0

[sub_resource type="Resource" id="13"]
script = ExtResource("5_38ubg")
name = "continue"

[sub_resource type="Resource" id="14"]
script = ExtResource("4_kukut")
from = "Victory"
to = "Exit"
conditions = {
"continue": SubResource("13")
}
priority = 0

[resource]
script = ExtResource("1_pyv1q")
states = {
"Entry": SubResource("3"),
"Exit": SubResource("4"),
"GameOver": SubResource("5"),
"Victory": SubResource("6")
}
transitions = {
"Entry": {
"GameOver": SubResource("Resource_4xc7j"),
"Victory": SubResource("Resource_kukut")
},
"GameOver": {
"Exit": SubResource("12")
},
"Victory": {
"Exit": SubResource("14")
}
}
name = "End"
state_class = SubResource("GDScript_pyv1q")
metadata/graph_offset = Vector2(779.5, 52.5)
